<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
    <link rel="stylesheet" type="text/css" href="Heatmap_page.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../lib/leaflet/leaflet.css" />
    <script type="text/javascript" src="../lib/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="../heatmap.js/build/heatmap.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="Heatmap_page.js"></script>
    <script type="text/javascript" src="../Folkmangd.json"></script>
    <script type="text/javascript" src="../heatmap.js/plugins/leaflet-heatmap/leaflet-heatmap.js"></script>
    
    
</head>
<body>
    <httpProtocol>
        <customHeaders>
            <add name="Access-Control-Allow-Origin" value="*" />
        </customHeaders>
    </httpProtocol>
    <div id="Main">
        <!-- First map-->
        <div class="Map"> 
            <p class="MapHeader">Map Location Based!</p>
            <div class="MapIllustration" id="mapOneID"></div>
        </div>
        <!-- Option Menu-->
        <div class="OptionMenu">
            <p class="OptionHeader" id="testid">Option Menu</p>
            <!--Folkmangd button-->
            <div class="OptionButton">
                <p class="OptionButtonHeader">Folkmängd</p>
                <select class="OptionMainDropdown" name="Landsting" id="Landsting0">
                    <option value="" disabled selected hidden>Välj landsting</option>
                    <option value="59.334415 18.110103 01">Stockholms län</option>
                    <option value="60.122902 17.750488 03">Uppsala län</option>
                    <option value="59.029457 16.764816 04">Södermanlands län</option>
                    <option value="58.34619 16.15167 05">Östergötlands län</option>
                    <option value="57.423412 14.34349 06">Jönköpings län</option>
                    <option value="56.86357 14.578271 07">Kronobergs län</option>
                    <option value="57.251823 16.308237 08">Kalmar län</option>
                    <option value="57.598454 18.732735 09">Gotlands län</option>
                    <option value="56.207233 15.158815 10">Blekinge län</option>
                    <option value="55.95244 13.482019 12">Skånge län</option>
                </select>
                <button class="OptionMainButton">Rendera karta</button>
            </div>
            <!--Folkokning button-->
            <div class="OptionButton">
                <p class="OptionButtonHeader">Folkökning</p>
                <select class="OptionMainDropdown" name="Landsting" id="Landsting1">
                    <option value="" disabled selected hidden>Välj landsting</option>
                    <option value="59.334415 18.110103 01">Stockholms län</option>
                    <option value="60.122902 17.750488 03">Uppsala län</option>
                    <option value="59.029457 16.764816 04">Södermanlands län</option>
                    <option value="58.34619 16.15167 05">Östergötlands län</option>
                    <option value="57.423412 14.34349 06">Jönköpings län</option>
                    <option value="56.86357 14.578271 07">Kronobergs län</option>
                    <option value="57.251823 16.308237 08">Kalmar län</option>
                    <option value="57.598454 18.732735 09">Gotlands län</option>
                    <option value="56.207233 15.158815 10">Blekinge län</option>
                    <option value="55.95244 13.482019 12">Skånge län</option>
                </select>
                <button class="OptionMainButton">Rendera karta</button>
            </div>
            <!--Folk arbetsloshet button-->
            <div class="OptionButton">
                <p class="OptionButtonHeader">Folk arbetslöshet</p>
                <select class="OptionMainDropdown" name="Landsting" id="Landsting2">
                    <option value="" disabled selected hidden>Välj landsting</option>
                    <option value="59.334415 18.110103 01">Stockholms län</option>
                    <option value="60.122902 17.750488 03">Uppsala län</option>
                    <option value="59.029457 16.764816 04">Södermanlands län</option>
                    <option value="58.34619 16.15167 05">Östergötlands län</option>
                    <option value="57.423412 14.34349 06">Jönköpings län</option>
                    <option value="56.86357 14.578271 07">Kronobergs län</option>
                    <option value="57.251823 16.308237 08">Kalmar län</option>
                    <option value="57.598454 18.732735 09">Gotlands län</option>
                    <option value="56.207233 15.158815 10">Blekinge län</option>
                    <option value="55.95244 13.482019 12">Skånge län</option>
                </select>
                <button class="OptionMainButton">Rendera karta</button>
            </div>
            <!--folk..... button-->
            <div class="OptionButton">
                <p class="OptionButtonHeader">Folk....</p>
                <select class="OptionMainDropdown" name="Landsting" id="Landsting3">
                    <option value="" disabled selected hidden>Välj landsting</option>
                    <option value="59.334415 18.110103 01">Stockholms län</option>
                    <option value="60.122902 17.750488 03">Uppsala län</option>
                    <option value="59.029457 16.764816 04">Södermanlands län</option>
                    <option value="58.34619 16.15167 05">Östergötlands län</option>
                    <option value="57.423412 14.34349 06">Jönköpings län</option>
                    <option value="56.86357 14.578271 07">Kronobergs län</option>
                    <option value="57.251823 16.308237 08">Kalmar län</option>
                    <option value="57.598454 18.732735 09">Gotlands län</option>
                    <option value="56.207233 15.158815 10">Blekinge län</option>
                    <option value="55.95244 13.482019 12">Skånge län</option>
                </select>
                <button id="testbutton" class="OptionMainButton">Rendera karta</button>
            </div>
            </div>
    </div>
    <script>
    // don't forget to include leaflet-heatmap.js
var testData = {
  max: 8,
  data: [{lat: 24.6408, lng:46.7728, count: 3},{lat: 50.75, lng:-1.55, count: 1},]
};

var baseLayer = L.tileLayer(
  'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution: '...',
    maxZoom: 18
  }
);

var cfg = {
  // radius should be small ONLY if scaleRadius is true (or small radius is intended)
  // if scaleRadius is false it will be the constant radius used in pixels
  "radius": 2,
  "maxOpacity": .8,
  // scales the radius based on map zoom
  "scaleRadius": true,
  // if set to false the heatmap uses the global maximum for colorization
  // if activated: uses the data maximum within the current map boundaries
  //   (there will always be a red spot with useLocalExtremas true)
  "useLocalExtrema": true,
  // which field name in your data represents the latitude - default "lat"
  latField: 'lat',
  // which field name in your data represents the longitude - default "lng"
  lngField: 'lng',
  // which field name in your data represents the data value - default "value"
  valueField: 'count'
};

//Varibles for map creation
var heatmapLayer = new HeatmapOverlay(cfg);
var cordsLat = '58.38900';
var cordsLng = '13.84598';
var cordsID = '00';

//Getting values from dropdown menu
$('#Landsting0').change(function(){
    console.log("hej2");
    console.log();
    str = $('#Landsting0').val();
    var r = str.split(" ");
    console.log(r);
    cordsLat = r[0];
    cordsLng = r[1];
    cordsID = r[2];
    });
//Getting values from dropdown menu
$('#Landsting1').change(function(){
    console.log("hej2");
    console.log();
    str = $('#Landsting1').val();
    var r = str.split(" ");
    console.log(r);
    cordsLat = r[0];
    cordsLng = r[1];
    cordsID = r[2];
    });
//Getting values from dropdown menu
$('#Landsting2').change(function(){
    console.log("hej2");
    console.log();
    str = $('#Landsting2').val();
    var r = str.split(" ");
    console.log(r);
    cordsLat = r[0];
    cordsLng = r[1];
    cordsID = r[2];
    });
//Getting values from dropdown menu
$('#Landsting3').change(function(){
    console.log("hej2");
    console.log();
    str = $('#Landsting3').val();
    var r = str.split(" ");
    console.log(r);
    cordsLat = r[0];
    cordsLng = r[1];
    cordsID = r[2];
    });


//Tring new function for json loding
https://github.com/a18lukto/Examensarbete/blob/6bbc6fabf0dd6fe55e953fb6fbd24e2e51a04709/Folkmangd.json

var staticUrl ='https://raw.githubusercontent.com/a18lukto/Examensarbete/main/Folkmangd.json';

$.getJSON(staticUrl, function(data){
console.log(data,"hej");
var dataValues = JSON.parse(JSON.stringify(data));
console.log(dataValues,"hej2");
console.log(dataValues[1],"01")

for (i = 0; i < data.length; i=i +1){
    console.log(data[i],"hej2");
}
});

//----------------------------------

$('.OptionMainButton').click(function () {
console.log(cordsID);

function displayAll(data){
    alert(data);
}
map.panTo(new L.LatLng(cordsLat, cordsLng));
    
});


var map = new L.Map('mapOneID', {
  center: new L.LatLng(cordsLat, cordsLng),
  zoom: 8,
  layers: [baseLayer, heatmapLayer]
});

heatmapLayer.setData(testData);
    </script>
</body>
</html>